[pytest]
# PersonalParakeet v3 Test Configuration

# Test discovery
testpaths = tests
python_files = test_*.py
python_classes = Test*
python_functions = test_*

# Test markers
markers =
    unit: Unit tests for individual components
    integration: Integration tests for component interaction
    e2e: End-to-end tests for complete workflows
    performance: Performance and benchmark tests
    slow: Tests that take longer than usual to run
    hardware: Tests that require specific hardware (skipped in CI)
    manual: Manual tests requiring user interaction
    v3: Tests specific to v3 implementation

# Test output and behavior with coverage
addopts =
    --strict-markers
    --verbose
    --tb=short
    --durations=10
    --color=yes
    --disable-warnings
    --cov=core
    --cov=ui
    --cov-report=term-missing
    --cov-report=html:test-reports/htmlcov
    --cov-report=xml:test-reports/coverage.xml

# Async test configuration
asyncio_mode = auto

# Timeout configuration
timeout = 300
timeout_method = thread

# Filter warnings
filterwarnings =
    ignore::DeprecationWarning
    ignore::PendingDeprecationWarning
    ignore::UserWarning:torch.*
    ignore::UserWarning:nemo.*

# Environment variables for testing
env = 
    PARAKEET_TEST_MODE=true
    PARAKEET_MOCK_AUDIO=true
    PARAKEET_DISABLE_GUI=true